<div>
  <h1>Reservations</h1>
</div>
<div id="res" class="transitions-enabled">
  <div class="box panel panel-default">
    <div class="panel panel-body">
      <div class="action">
        <%= link_to new_reservation_path do %>
          <button class="btn btn-default btn-lg" >
            <span class="glyphicon glyphicon-plus"></span> Add
          </button>
        <% end %>
      </div>
    </div>
  </div>
  <div class="box panel panel-default">
    <div class="panel panel-body">
      <div class="action">
          <%= link_to pick_reservations_path do %>
            <button class="btn btn-default btn-lg" >
              <span class="glyphicon glyphicon-pencil"></span>
              <span class="glyphicon glyphicon-trash"></span> Edit/Delete
            </button>
          <% end %>
      </div>
    </div>
  </div>
  <div class="box panel panel-default">
    <div class="panel panel-body">
      <div class="action">
        <button class="btn btn-default btn-lg" data-toggle="modal" data-target="#myModal">
          <span class="glyphicon glyphicon-search" data-toggle="modal" data-target="#myModal"></span> View
        </button>
      </div>
    </div>
  </div>
</div>

<br>
<div>
  <%= link_to 'New Reservation', new_reservation_path %>
</div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">View Reservations</h4>
      </div>
      <%= simple_form_for @reservations, :url => lookup_reservations_path, :reservation_id => '', :method => :post do |f| %>
        <div class="modal-body">
          <div class="form-group">
            <div class="fl">
              <div class="panel panel-default">
                <div class="panel-body">
                  <div id="reportrange" class="pull-right">
                    <i class="fa fa-calendar fa-lg"></i>
                      <span>Pick A Reservation Week</span> <b class="caret"></b>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <%= f.input :reservation_date, as: :hidden %>
        </div>
        <div class="modal-footer">
          <%= f.button :submit,  label: 'View Reservations', class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
<script type="text/javascript">
var a = moment().day("Wednessday").week(Number).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 6).format('MMMM D, YYYY').toString();
var b = moment().day("Wednessday").week(Number).add('days', 7).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 13).format('MMMM D, YYYY').toString();
var c = moment().day("Wednessday").week(Number).add('days', 14).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 20).format('MMMM D, YYYY').toString();
var d = moment().day("Wednessday").week(Number).add('days',21 ).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 27).format('MMMM D, YYYY').toString();
var e = moment().day("Wednessday").week(Number).add('days',28 ).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 34).format('MMMM D, YYYY').toString();
var f = moment().day("Wednessday").week(Number).add('days', 35 ).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 41).format('MMMM D, YYYY').toString();
var g = moment().day("Wednessday").week(Number).add('days', 42 ).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 48).format('MMMM D, YYYY').toString();
var h = moment().day("Wednessday").week(Number).add('days', 49 ).format('MMMM D, YYYY').toString() + ' - ' + moment().day("Wednessday").week(Number).add('days', 55).format('MMMM D, YYYY').toString();
var obj = {};
obj[a] = [moment().day("Wednessday").week(Number), moment().day("Wednessday").week(Number).add('days', 6)];
obj[b] = [moment().day("Wednessday").week(Number).add('days', 7), moment().day("Wednessday").week(Number).add('days', 13)];
obj[c] = [moment().day("Wednessday").week(Number).add('days', 14), moment().day("Wednessday").week(Number).add('days', 20)];
obj[d] = [moment().day("Wednessday").week(Number).add('days',21 ), moment().day("Wednessday").week(Number).add('days', 27)];
obj[e] = [moment().day("Wednessday").week(Number).add('days',28 ), moment().day("Wednessday").week(Number).add('days', 34)];
obj[f] = [moment().day("Wednessday").week(Number).add('days', 35 ), moment().day("Wednessday").week(Number).add('days', 41)];
obj[g] = [moment().day("Wednessday").week(Number).add('days', 42 ), moment().day("Wednessday").week(Number).add('days', 48)];
obj[h] = [moment().day("Wednessday").week(Number).add('days', 49 ), moment().day("Wednessday").week(Number).add('days', 55)];
$('#reportrange').daterangepicker(
    {
      ranges: obj,
      startDate: moment().subtract('days', 29),
      endDate: moment()
    },
    function(start, end) {
        $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
        $('#reservation_reservation_date').val(start.format('"YYYY/MM/DD"'));
    }
);
</script>

